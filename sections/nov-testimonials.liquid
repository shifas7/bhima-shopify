{%- liquid
	assign sst = section.settings

	if section.settings.ss_bg_enable
		assign bg = " bg"
	endif
	if section.settings.class_section != blank
		assign class_section = section.settings.class_section | prepend: ' '
	endif
	assign class = 'distance' | append: bg | append: ' ' | append: section.settings.background_position | append: class_section
	if section.settings.background_size == 'full'
		assign bg_class_full = class | prepend: ' '
	else
		assign bg_class_contain = class | prepend: ' '
	endif
-%}
{% style %}
	{% render 'nov-section-style' %}

	#shopify-section-{{ section.id }} .container-full {
		padding-left: 15px;
		padding-right: 15px;
	}
	{% if sst.text_mw != blank %}
		#shopify-section-{{ section.id }} .testimonial-item__quote p {
			max-width: {{ sst.text_mw }}px;
			display: inline-block;
		}
	{% endif %}
	
	{% if sst.s_star %}
		#shopify-section-{{ section.id }} .testimonial-rating i.rating {
			color: {{ sst.color_rating }}
		}
	{% endif %}

	{% if sst.show_nav %}
		#shopify-section-{{ section.id }} .nav-arrow {
			--slider-arrow-color: {{ sst.slider_arrow_color }};
			--slider-arrow-color-act: {{ sst.slider_arrow_color_act }};
		}
	{% endif %}

{% endstyle %}

<div class="color-{{ sst.color_section }}{{ bg_class_full }}" data-section-id="{{ section.id }}" data-section-type="nov-slick">
	<div class="{{ sst.container }}">
		<div class="container-inner{{ bg_class_contain }}">
			{% if section.blocks.size > 0 %}
				{% render 'heading-section', sub_position: sst.subheading_position %}
				<div class="nov-slick-carousel row spacing-30{% if sst.animate %} wow fadeInRight{% endif %} "
					data-loop="true"
					data-dots="{{ sst.show_dots }}"
					data-nav="{{ sst.show_nav }}"
					data-items_xxl="{{ sst.xxl }}"
					data-items_xl="{{ sst.xl }}"
					data-items_lg="{{ sst.lg }}"
					data-items_md="{{ sst.md }}"
					data-items_sm="{{ sst.sm }}"
					data-items_xs="{{ sst.xs }}"
					data-row="{{ sst.row_number }}"
					data-center="true"
					data-oneslider
					{% if sst.show_nav %}data-custnav{% endif %}>
						{% for block in section.blocks %}
							{% assign bst = block.settings %}
							{%- liquid 
								case bst.star
									when 1
									assign ns = '<i class="rating"></i><i></i><i></i><i></i><i></i>'
									when 2
									assign ns = '<i class="rating"></i><i class="rating"></i><i></i><i></i><i></i>'
									when 3
									assign ns = '<i class="rating"></i><i class="rating"></i><i class="rating"></i><i></i><i></i>'
									when 4
									assign ns = '<i class="rating"></i><i class="rating"></i><i class="rating"></i><i class="rating"></i><i></i>'
									when 5
									assign ns = '<i class="rating"></i><i class="rating"></i><i class="rating"></i><i class="rating"></i><i class="rating"></i>'
								endcase
							-%}
							<div class="sp-item position-relative">
								<div class="testimonial-item text-center">
									{% if sst.s_star %}
										<div class="testimonial-rating mb-25">{{ ns }}</div>
									{% endif %}
									{% if bst.title != blank %}<div class="testimonial-title font-500 mb-20 color-title">{{ bst.title }}</div>{% endif %}
									{% if bst.quote != blank %}<div class="testimonial-item__quote color-title">{{ bst.quote }}</div>{% endif %}
									
									{% if sst.show_avatar %}
										<div class="testimonial-avatar overflow_hidden r-100 m-auto mt-25">
											{% if bst.avatar != blank %}
												{% render 'nov-aspect-image', image: bst.avatar, aspect: '11' %}
											{% else %}
												{%- capture current -%}{% cycle 1, 2, 3, 4 %}{%- endcapture -%}
												{{ 'collection-apparel-' | append: current | placeholder_svg_tag : 'placeholder-svg' }}
											{% endif %}
										</div>
									{% endif %}

									{% if bst.name != blank or bst.info != blank %}
										<div class="block-info mt-25">
											{% if bst.name != blank %}<div class="testimonial-name font-500 f_pr color-title">{{ bst.name }}</div>{% endif %}
											{% if bst.info != blank %}<div class="testimonial-info font-500 color-text">{{ bst.info }}</div>{% endif %}
										</div>
									{% endif %}
								</div>
							</div>
						{% endfor %}
				</div>
				{% if sst.show_nav or sst.show_dots %}
				<div class="d-flex justify-content-center align-items-center mt-60 {{ sst.dots_color }}">
					{% if sst.show_nav %}
						<div class="nav-arrow nav-prev pointer"></div>
					{% endif %}
					{% if sst.show_dots %}
						<div class="append-dots"></div>
					{% endif %}
					{% if sst.show_nav %}
						<div class="nav-arrow nav-next pointer"></div>
					{% endif %}
				</div>
				{% endif %}
			{% else %}
				{% render 'no-blocks' %}
			{% endif %}
		</div>
	</div>
</div>

{% schema %}
	{
		"name": "Vinova Testimonials",
		"class": "section-testimonials",
		"settings": [
			{
				"type": "richtext",
				"id": "heading",
				"label": "Heading",
				"default": "<p>Vinova Testimonials</p>"
			},
			{
				"type": "color",
				"id": "heading_color",
				"label": "Heading color",
				"default": "#222222"
			},
			{
				"type": "richtext",
				"id": "subheading",
				"label": "Sub heading",
				"default": "<p>Subtitle from happy customers</p>"
			},
			{
				"type": "color",
				"id": "subheading_color",
				"label": "Sub heading color",
				"default": "#666666"
			},
			{
				"type": "richtext",
				"id": "descheading",
				"label": "Description",
				"default": "<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>"
			},
			{
				"type": "color",
				"id": "descheading_color",
				"label": "Description color",
				"default": "#666666"
			},
			{
				"type": "image_picker",
				"id": "img_heading",
				"label": "Image heading"
			},
			{
				"type": "select",
				"id": "subheading_position",
				"label": "Sub heading position",
				"default": "bottom",
				"options": [
					{
						"value": "top",
						"label": "Top"
					},
					{
						"value": "bottom",
						"label": "Bottom"
					}
				]
			},
			{
				"type": "select",
				"id": "heading_alignment",
				"label": "Heading alignment",
				"default": "text-left",
				"options": [
					{
						"value": "text-left",
						"label": "Left"
					},
					{
						"value": "text-center",
						"label": "Center"
					},
					{
						"value": "text-right",
						"label": "Right"
					}
				]
			},
			{
				"type":  "header",
				"content": "Item Per Row"
			},
			{
				"type": "range",
				"id": "xxl",
				"min": 1,
				"max": 6,
				"step": 1,
				"label": "Desktop",
				"default": 3,
				"info": "Breakpoint 1441px"
			},
			{
				"type": "range",
				"id": "xl",
				"min": 1,
				"max": 6,
				"step": 1,
				"label": "Large laptop",
				"default": 3,
				"info": "Breakpoint 1200px"
			},
			{
				"type": "range",
				"id": "lg",
				"min": 1,
				"max": 6,
				"step": 1,
				"label": "Laptop",
				"default": 3,
				"info": "Breakpoint 992px"
			},
			{
				"type": "range",
				"id": "md",
				"min": 1,
				"max": 6,
				"step": 1,
				"label": "Tablet",
				"default": 3,
				"info": "Breakpoint 768px"
			},
			{
				"type": "range",
				"id": "sm",
				"min": 1,
				"max": 6,
				"step": 1,
				"label": "Large mobile",
				"default": 2,
				"info": "Breakpoint 576px"
			},
			{
				"type": "range",
				"id": "xs",
				"min": 1,
				"max": 6,
				"step": 1,
				"label": "Mobile",
				"default": 2,
				"info": "Breakpoint"
			},
			{
				"type": "range",
				"id": "row_number",
				"min": 1,
				"max": 6,
				"step": 1,
				"label": "Number row",
				"default": 1
			},
			{
				"type": "header",
				"content": "Dots Slider"
			},
			{
				"type": "checkbox",
				"id": "show_dots",
				"label": "Show dots",
				"default": false
			},
			{
				"type": "select",
				"id": "dots_color",
				"label": "Dots color",
				"default": "dots_on_light",
				"options": [
					{"value": "dots_on_light","label": "Dots on light background"},
					{"value": "dots_on_dark","label": "Dots on dark background"}
				]
			},
			{
				"type": "header",
				"content": "Arrow Slider"
			},
			{
				"type": "checkbox",
				"id": "show_nav",
				"label": "Show prev/next arrow",
				"default": true
			},
			{
				"type": "color",
				"id": "slider_arrow_color",
				"label": "Color",
				"default": "#222"
			},
			{
				"type": "color",
				"id": "slider_arrow_color_act",
				"label": "Color hover",
				"default": "#666"
			},
			{
				"type":  "header",
				"content": "Design Testimonials Item"
			},
			{
				"type": "checkbox",
				"id": "s_star",
				"label": "Show rating"
			},
			{
				"type": "color",
				"id": "color_rating",
				"label": "Color rating",
				"default": "#fdad09"
			},
			{
				"type": "checkbox",
				"id": "show_avatar",
				"label": "Show avatar",
				"default": true
			},
			{
				"type": "number",
				"id": "text_mw",
				"label": "Text max width (px)"
			},
			{
				"type":  "header",
				"content": "Section Style"
			},
			{
				"type": "checkbox",
				"id": "animate",
				"label": "Show animated",
				"default": true
			},
			{
				"type": "select",
				"id": "container",
				"label": "Container",
				"default": "container",
				"options": [
					{ "value": "container", "label": "Container"},
					{ "value": "container-fluid", "label": "Container fluid"},
					{ "value": "container-full", "label": "Container full width"}
				]
			},
			{
				"type": "color_scheme",
				"id": "color_section",
				"label": "Color section",
				"default": "background-1"
			},
			{
				"type": "text",
				"id": "class_section",
				"label": "Class"
			},
			{
				"type":  "header",
				"content": "Section Background"
			},
			{
				"type": "checkbox",
				"id": "ss_bg_enable",
				"label": "Enable"
			},
			{
				"type": "color",
				"id": "background_color",
				"label": "Background colors",
				"default": "#ffffff"
			},
			{
				"type": "image_picker",
				"id": "background_image",
				"label": "Background image"
			},
			{
				"type": "range",
				"id": "background_corner",
				"min": 0,
				"max": 50,
				"step": 1,
				"label": "Corner background",
				"unit": "px",
				"default": 0
			},
			{
				"type": "select",
				"id": "background_img_size",
				"label": "Background image size",
				"default": "cover",
				"options": [
					{ "value": "auto", "label": "Auto" },
					{ "value": "cover", "label": "Cover" },
					{ "value": "contain", "label": "Contain" }
				]
			},
			{
				"type": "checkbox",
				"id": "enable_background_img_size_custom",
				"label": "Enable background image size custom"
			},
			{
				"type": "text",
				"id": "background_img_size_custom",
				"label": "Background image size custom",
				"info": "Replace base background size, unit % or px"
			},
			{
				"type": "select",
				"id": "background_img_position",
				"label": "Background image position",
				"default": "center center",
				"options": [
					{ "value": "top left", "label": "Top left" },
					{ "value": "top center", "label": "Top center" },
					{ "value": "top right", "label": "Top right" },
					{ "value": "center left", "label": "Center left" },
					{ "value": "center center", "label": "Center middle" },
					{ "value": "center right", "label": "Center right" },
					{ "value": "bottom left", "label": "Bottom left" },
					{ "value": "bottom center", "label": "Bottom center" },
					{ "value": "bottom right", "label": "Bottom right" }
				]
			},
			{
				"type": "select",
				"id": "background_position",
				"label": "Background position",
				"default": "bg-center",
				"options": [
					{ "value": "bg-top", "label": "Top" },
					{ "value": "bg-center", "label": "Center" },
					{ "value": "bg-bottom", "label": "Bottom" }
				]
			},
			{
				"type": "select",
				"id": "background_size",
				"label": "Background size",
				"default": "full",
				"options": [
					{ "value": "full", "label": "Full" },
					{ "value": "contain", "label": "Contain"}
				]
			},
			{
				"type": "range",
				"id": "height_background_xxl",
				"min": 10,
				"max": 100,
				"step": 1,
				"label": "Height background",
				"default": 100,
				"unit": "%",
				"info": "Breakpoint 1441px ↑"
			},
			{
				"type": "range",
				"id": "height_background_xl",
				"min": 10,
				"max": 100,
				"step": 1,
				"label": "Height background",
				"default": 100,
				"unit": "%",
				"info": "Breakpoint 1200px ↑"
			},
			{
				"type": "range",
				"id": "height_background_lg",
				"min": 10,
				"max": 100,
				"step": 1,
				"label": "Height background",
				"default": 100,
				"unit": "%",
				"info": "Breakpoint 992px ↑"
			},
			{
				"type": "range",
				"id": "height_background_md",
				"min": 10,
				"max": 100,
				"step": 1,
				"label": "Height background",
				"default": 100,
				"unit": "%",
				"info": "Breakpoint 768px ↑"
			},
			{
				"type": "range",
				"id": "height_background_sm",
				"min": 10,
				"max": 100,
				"step": 1,
				"label": "Height background",
				"default": 100,
				"unit": "%",
				"info": "Breakpoint 576px ↑"
			},
			{
				"type": "range",
				"id": "height_background_xs",
				"min": 10,
				"max": 100,
				"step": 1,
				"label": "Height background",
				"default": 100,
				"unit": "%",
				"info": "Breakpoint 575px ↓"
			},
			{
				"type": "header",
				"content": "Spacing Top (px)"
			},
			{
				"type": "number",
				"id": "distance_top_xl",
				"label": "Large laptop",
				"default": 30,
				"info": "Breakpoint 1200px"
			},
			{
				"type": "number",
				"id": "distance_top_lg",
				"label": "Laptop",
				"default": 30,
				"info": "Breakpoint 992px"
			},
			{
				"type": "number",
				"id": "distance_top_md",
				"label": "Tablet",
				"default": 30,
				"info": "Breakpoint 768px"
			},
			{
				"type": "number",
				"id": "distance_top_sm",
				"label": "Mobile",
				"default": 30
			},
			{
				"type": "header",
				"content": "Spacing Bottom (px)"
			},
			{
				"type": "number",
				"id": "distance_bottom_xl",
				"label": "Large laptop",
				"default": 30,
				"info": "Breakpoint 1200px"
			},
			{
				"type": "number",
				"id": "distance_bottom_lg",
				"label": "Laptop",
				"default": 30,
				"info": "Breakpoint 992px"
			},
			{
				"type": "number",
				"id": "distance_bottom_md",
				"label": "Tablet",
				"default": 30,
				"info": "Breakpoint 768px"
			},
			{
				"type": "number",
				"id": "distance_bottom_sm",
				"label": "Mobile",
				"default": 30
			}
		],
		"blocks": [
			{
				"type": "quote",
				"name": "Testimonial",
				"settings": [
					{
						"type": "image_picker",
						"id": "avatar",
						"label": "Avatar"
					},
					{
						"type": "range",
						"id": "star",
						"min": 1,
						"max": 5,
						"step": 1,
						"label": "Rating",
						"default": 5
					},
					{
						"type": "inline_richtext",
						"id": "title",
						"label": "Title",
						"default": "CUSTOMER REVIEWS"
					},
					{
						"type": "inline_richtext",
						"id": "name",
						"label": "Name",
						"default": "Christina M."
					},
					{
						"type": "inline_richtext",
						"id": "info",
						"label": "Info",
						"default": "From Canada"
					},
					{
						"type": "richtext",
						"id": "quote",
						"label": "Text",
						"default": "<p>Add customer reviews and testimonials to showcase your store’s happy customers.</p>"
					}
				]
			}
		],
		"presets": [
			{
				"name": "Vinova Testimonials",
				"blocks": [
					{
						"type": "quote"
					},
					{
						"type": "quote"
					},
					{
						"type": "quote"
					}
				]
			}
		]
	}
{% endschema %}
